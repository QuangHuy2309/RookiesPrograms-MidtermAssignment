CREATE TABLE persons
(
    email text NOT NULL PRIMARY KEY,
    password text  NOT NULL,
    fullname text NOT NULL,
    dob date NOT NULL,
    gender bit(1) NOT NULL,
    address text NOT NULL,
    phonenumber varchar(12) NOT NULL,
    role text
);

CREATE TABLE products
(
    product_id text not null PRIMARY KEY,
    name text,
    price numeric,
    quantity integer,
    product_type text,
    description text,
    brand text,
    photo1 text null,
    photo2 text null, 
    photo3 text null,
    photo4 text null
);
CREATE TABLE orderbill
(
    id serial PRIMARY KEY,
    product_id text NOT NULL,
    customer_email text NOT NULL,
    quantity integer NOT NULL,
    timebought timestamp NOT NULL,
    total_cost numeric not null,
    rate_num int null, 
    rate_text text null,
    status bit NOT NULL,
    CONSTRAINT fk_products FOREIGN KEY(product_id) REFERENCES products(product_id),
	CONSTRAINT fk_persons FOREIGN KEY(customer_email) REFERENCES persons(email)
);

insert into persons 
values ('shynhyn319@gmail.com','123','Lê Hoàng Nhât Lâm','1999-02-03',B'0','TP HCM','0967123456','admin'),
		('lqhuy2309@gmail.com','123','Luơng Quang Huy','1999-09-23',B'0','Long An','0967123456','user'),
		('nguyenvana@gmail.com','123','Nguyên Văn A','1999-01-01',B'0','Bến Tre','0967123456','user')
alter table orderbill 
add column status boolean not null,
add column rate_num int null, 
add column rate_text text null;
insert into products 
values ('A','b',1000,23,'mountain','abc','giant')


CREATE TABLE categories
(
    id serial primary key,
    producttype text NOT NULL,
    description text
);

ALTER TABLE products 
ADD CONSTRAINT fk_products_categories 
FOREIGN KEY (producttype) 
REFERENCES categories (id);


insert into categories (categoriesname ,description ) 
values ('Mountain','Bike for Mountaing'), ('Road','Bike for long road'), ('Race','Bike for Racing')
